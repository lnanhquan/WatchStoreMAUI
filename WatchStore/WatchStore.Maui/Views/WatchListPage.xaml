<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:telerik="http://schemas.telerik.com/2022/xaml/maui"
             x:Class="WatchStore.Maui.Views.WatchListPage"
             Title="Watch List">

    <telerik:RadBusyIndicator x:Name="busyIndicator" 
                              IsBusy="{Binding IsLoading}"
                              AnimationType="Animation3"
                              AnimationContentColor="{AppThemeBinding Light=#512BD4, Dark=White}"
                              ContentUnderOpacity="0.2"
                              AnimationContentHeightRequest="150"
                              AnimationContentWidthRequest="150">
        
        <telerik:RadBusyIndicator.Content>
            <Grid>
                <RefreshView IsRefreshing="{Binding IsLoading}"
                             Command="{Binding LoadWatchesCommand}">
                    
                    <telerik:RadCollectionView x:Name="collectionView" ItemsSource="{Binding Watches}">
                        
                        <telerik:RadCollectionView.ItemsLayout>
                            <telerik:CollectionViewGridLayout SpanCount="4"
                                                   Orientation="Vertical"
                                                   HorizontalItemSpacing="10"
                                                   VerticalItemSpacing="10" />
                        </telerik:RadCollectionView.ItemsLayout>

                        <telerik:RadCollectionView.ItemTemplate>
                            <DataTemplate>
                                <telerik:RadBorder Padding="10"
                                                   BackgroundColor="{AppThemeBinding Light=#FFFFFF, Dark=#2A2A2A}"
                                                   CornerRadius="15"
                                                   HorizontalOptions="Center"
                                                   MinimumWidthRequest="430"
                                                   MinimumHeightRequest="430">

                                    <telerik:RadBorder.Shadow>
                                        <Shadow Radius="15" Opacity="{AppThemeBinding Light=0.2, Dark=0.8}" Offset="0,0"/>
                                    </telerik:RadBorder.Shadow>
                                    
                                    <Grid RowDefinitions="280,45,*" RowSpacing="6">

                                        <Image Grid.Row="0"
                                           Source="{Binding ImageUrl}"
                                           HeightRequest="280"
                                           WidthRequest="280"
                                           Aspect="AspectFit"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center" />

                                        <Label Grid.Row="1"
                                           Text="{Binding Name}"
                                           TextColor="{AppThemeBinding Light=Black, Dark=White}"
                                           FontSize="16"
                                           FontAttributes="Bold"
                                           MaxLines="2"
                                           LineBreakMode="TailTruncation"
                                           HorizontalTextAlignment="Center" />

                                        <Label Grid.Row="2"
                                           Text="{Binding Price, StringFormat='{0:N0} Ä‘'}"
                                           FontSize="20"
                                           FontAttributes="Bold"
                                           TextColor="#0F766E"
                                           HorizontalTextAlignment="Center"
                                           VerticalOptions="End" />

                                    </Grid>
                                </telerik:RadBorder>
                            </DataTemplate>
                        </telerik:RadCollectionView.ItemTemplate>
                    </telerik:RadCollectionView>
                    
                </RefreshView>
            </Grid>
        </telerik:RadBusyIndicator.Content>
        
    </telerik:RadBusyIndicator>
</ContentPage>
